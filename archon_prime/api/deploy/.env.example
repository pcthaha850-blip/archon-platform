# ============================================================
# ARCHON PRIME - Environment Configuration Template
# ============================================================
# Copy this file to .env.dev, .env.staging, or .env.prod
# and fill in the appropriate values.
#
# NEVER commit .env files with real secrets to version control!
# ============================================================

# ------------------------------------------------------------
# Application Settings
# ------------------------------------------------------------
APP_ENV=development                    # development | staging | production
APP_NAME="ARCHON PRIME"
APP_VERSION=1.0.0
DEBUG=true                             # true in dev, false in staging/prod
HOST=0.0.0.0
PORT=8000

# ------------------------------------------------------------
# Database Configuration
# ------------------------------------------------------------
# Development (local Docker):
DATABASE_URL=postgresql+asyncpg://archon_dev:archon_dev_password@localhost:5432/archon_prime_dev

# Staging (managed service):
# DATABASE_URL=postgresql+asyncpg://user:password@staging-db.example.com:5432/archon_staging

# Production (managed service with SSL):
# DATABASE_URL=postgresql+asyncpg://user:password@prod-db.example.com:5432/archon_prod?ssl=require

# PostgreSQL credentials (for docker-compose)
POSTGRES_USER=archon_dev
POSTGRES_PASSWORD=archon_dev_password
POSTGRES_DB=archon_prime_dev

# ------------------------------------------------------------
# Redis Configuration
# ------------------------------------------------------------
# Development:
REDIS_URL=redis://localhost:6379/0

# With password (staging/production):
# REDIS_URL=redis://:password@redis-host:6379/0
REDIS_PASSWORD=

# ------------------------------------------------------------
# Security - JWT Configuration
# ------------------------------------------------------------
# CRITICAL: Generate secure random keys for staging/production
# Generate with: openssl rand -hex 32

JWT_SECRET_KEY=dev-jwt-secret-key-change-in-production-min-32-chars
JWT_REFRESH_SECRET_KEY=dev-refresh-secret-key-change-in-production-min-32
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=15
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7
JWT_ALGORITHM=HS256

# ------------------------------------------------------------
# Security - Encryption Key
# ------------------------------------------------------------
# Used for encrypting MT5 credentials at rest
# MUST be exactly 32 bytes (256 bits) for AES-256
# Generate with: openssl rand -hex 16 (gives 32 hex chars = 16 bytes, then pad)
# Or: python -c "import secrets; print(secrets.token_hex(16))"

ENCRYPTION_KEY=dev-encryption-key-32-bytes-!!

# ------------------------------------------------------------
# CORS Configuration
# ------------------------------------------------------------
# JSON array of allowed origins
CORS_ORIGINS=["http://localhost:3000","http://localhost:5173","http://127.0.0.1:3000"]

# Production example:
# CORS_ORIGINS=["https://app.archon.ai","https://admin.archon.ai"]

# ------------------------------------------------------------
# Rate Limiting
# ------------------------------------------------------------
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100               # Requests per window
RATE_LIMIT_WINDOW=60                  # Window in seconds

# ------------------------------------------------------------
# Logging
# ------------------------------------------------------------
LOG_LEVEL=DEBUG                       # DEBUG | INFO | WARNING | ERROR
LOG_FORMAT=text                       # text | json (use json in production)

# ------------------------------------------------------------
# MT5 Configuration
# ------------------------------------------------------------
# Default MT5 server for new connections
MT5_DEFAULT_SERVER=Demo-Server

# Connection pool settings
MT5_POOL_MIN_SIZE=1
MT5_POOL_MAX_SIZE=10
MT5_POOL_TIMEOUT=30

# ------------------------------------------------------------
# Background Workers
# ------------------------------------------------------------
WORKER_RECONCILIATION_INTERVAL=30     # seconds
WORKER_ACCOUNT_SYNC_INTERVAL=10       # seconds
WORKER_HEALTH_CHECK_INTERVAL=15       # seconds
WORKER_SIGNAL_EXPIRATION_INTERVAL=60  # seconds

# ------------------------------------------------------------
# Signal Gate Configuration
# ------------------------------------------------------------
SIGNAL_CONFIDENCE_THRESHOLD=0.70
SIGNAL_MAX_POSITIONS=5
SIGNAL_MAX_DAILY_SIGNALS=100
SIGNAL_RATE_LIMIT_PER_MINUTE=10

# ------------------------------------------------------------
# Feature Flags
# ------------------------------------------------------------
MAINTENANCE_MODE=false
TRADING_ENABLED=true
REGISTRATION_ENABLED=true

# ------------------------------------------------------------
# Monitoring & Observability (Optional)
# ------------------------------------------------------------
# Sentry for error tracking
SENTRY_DSN=

# Prometheus metrics
METRICS_ENABLED=false
METRICS_PORT=9090

# ------------------------------------------------------------
# Docker Registry (Production)
# ------------------------------------------------------------
DOCKER_REGISTRY=archon
VERSION=latest
API_REPLICAS=3
WORKER_REPLICAS=2
